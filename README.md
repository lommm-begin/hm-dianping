# 黑马点评

1. 高并发优化​​
* 使用Lua脚本实现Redis限流，防止恶意大量请求。 
* 设计逻辑过期策略，减少数据库压力。 
* 使用Redisson实现的布隆过滤器，避免缓存空值导致内存无效占用。 
* 将首页热点数据存储到Redis，防止大量访问时频繁从数据库读取数据，提高响应速度。 
* 将点赞数量缓存到Redis，采用定时任务同步到数据库，防止频繁修改数据库触发锁。 
2. 消息队列改进​​
* 采用RabbitMQ替代Redis消息队列，实现手动ACK确保消息不丢失。 
* ACK失败重新计数，使用Redis作为计数器，采用Lua脚本保证原子性，根据业务设计降级策略，提升系统容错能力。 
* 消费者开启手动确认机制，使用AOP进行手动确认和取消，配置死信队列，防止消息丢失。 
* 使用延迟队列插件，避免阻塞用户线程或者消费者线程。 
3. 安全增强​​
* 将SpringMVC拦截器升级为Spring Security+RBAC+JWT认证，提升账号安全性。 
* 封装路由策略工具类，与Spring Security路径一致，统一从配置文件获取。 
4. ​​分布式锁优化​
* 使用Redisson的分布式锁替代SETNX，防止死锁和无法自动续期问题，提高锁可靠性。 
---
在使用Security的时候发现前端有点问题，首页有个获取当前用户是否点赞的请求，无论是否登录都会请求，所以一直被拦截，所以加了个判断是否本地的token是否为空，为空就不发送
